/*! BestForMe 04-12-2017 */
console.log(Backbone.LocalStorage);var BestForMe=Backbone.Marionette.Application.extend({appData:{endpoints:{ee:null,three:null,vodafone:null,o2:null,ofcom:null},data:{ee:null,three:null,vodafone:null,o2:null,ofcom:null,results:null},modules:{bestForMe:!1},features:{footer:!1},localMode:!1,token:null,tokenBearerHeader:null,debug:!1,title:null,errorMessage:{0:"The server could not be reached. Please wait 30 seconds and try to reload the page.",500:"The server could not be reached. Please wait 30 seconds and try to reload the page.",503:"The server could not be reached. Please wait 30 seconds and try to reload the page.",504:"The server could not be reached. Please wait 30 seconds and try to reload the page.",404:"The page you requested could not be found.",400:"There is a problem with this version of the app. Please contact technical support."},rootHomePage:"home"},dataManager:null,routerController:null,router:null,authChannel:null,dataChannel:null,routerChannel:null,redirectTo:{pathname:null,hash:null},initialize:function(a){"false"===a.debug&&(console.log=function(){}),console.log("BestForMe.INIT href: "+window.location.href+" pathname: "+window.location.pathname+" hash: "+window.location.hash),this.initAppData(a),this.dataChannel=Backbone.Radio.channel("data"),this.routerChannel=Backbone.Radio.channel("router"),this.listenTo(this.routerChannel,"navigate:to:page",this.navigateToPage),this.listenTo(this.routerChannel,"route:executed",this.onRouteExecuted),this.dataManager=new BestForMe.DataManager({appData:this.appData}),this.routerController=new BestForMe.RouterController({appData:this.appData}),this.router=new BestForMe.Router({appData:this.appData,controller:this.routerController})},initAppData:function(a){this.appData.localMode=!0,this.appData.apiBaseUrl="/data",this.appData.endpoints.ee=a.eeEndpoint,this.appData.endpoints.three=a.threeEndpoint,this.appData.endpoints.vodafone=a.vodafoneEndpoint,this.appData.endpoints.o2=a.o2Endpoint,this.appData.endpoints.ofcom=a.ofcomEndpoint,this.appData.title=a.title,this.appData.debug=a.debug,this.appData.features.footer=!1,this.appData.modules.bestForMe=!0},onStart:function(){console.log("BestForMe.START href: "+window.location.href+" pathname: "+window.location.pathname+" hash: "+window.location.hash),console.log("LOCALMODE: "+this.appData.localMode),Backbone.history.start({pushState:!0}),this.bypassAuth()},bypassAuth:function(){console.log("App.bypassAuth"),this.routerController.forceInitialRender(),this.router.navigate("home",{trigger:!0})}});!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"!=typeof window.CustomEvent&&(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}(),BestForMe.LocalStoreManager=function(){function a(){var a=this;this.syncKeys=[],this.reservedKeys=["sync_keys","addToSyncKeys","removeFromSyncKeys","getSessionStorage","setSessionStorage","addToSessionStorage","removeFromSessionStorage","clearAllSessionsStorage","raiseDBEvent"],this.localStorageSupported=!1,this.sessionStorageTransferHandler=function(b){if(b.newValue)if("getSessionStorage"==b.key)sessionStorage.length&&a.localStorageSupported&&(localStorage.setItem("setSessionStorage",JSON.stringify(sessionStorage)),localStorage.removeItem("setSessionStorage"));else if("setSessionStorage"==b.key)a.setSessionStorageHelper(b.newValue);else if("addToSessionStorage"==b.key){var c=JSON.parse(b.newValue);a.addToSessionStorageHelper(c.data,c.key)}else"removeFromSessionStorage"==b.key?a.removeFromSessionStorageHelper(b.newValue):"clearAllSessionsStorage"==b.key&&sessionStorage.length?a.clearInstanceSessionStorage():"addToSyncKeys"==b.key?a.addToSyncKeysHelper(b.newValue):"removeFromSyncKeys"==b.key&&a.removeFromSyncKeysHelper(b.newValue)}}return a.prototype.isLocalStorageSupported=function(){try{return localStorage.setItem("test",1),localStorage.removeItem("test"),!0}catch(a){return!1}},a.prototype.initialiseStorageSyncListener=function(){console.log("LocalStoreManager.initialiseStorageSyncListener: "+a.syncListenerInitialised),1!=a.syncListenerInitialised&&(a.syncListenerInitialised=!0,this.localStorageSupported=this.isLocalStorageSupported(),console.log("LOCAL STORAGE SUPPORTED ? "+this.localStorageSupported),window.addEventListener("storage",this.sessionStorageTransferHandler,!1),this.syncSessionStorage())},a.prototype.deinitialiseStorageSyncListener=function(){window.removeEventListener("storage",this.sessionStorageTransferHandler,!1),a.syncListenerInitialised=!1},a.prototype.setSessionStorageHelper=function(a){this.syncKeys.length||this.loadSyncKeys();var b=JSON.parse(a),c=[];for(var d in b)this.syncKeysContains(d)&&(this.localStorageSupported&&sessionStorage.setItem(d,b[d]),c.push(d));var e=new CustomEvent("sessionStorageSet",{detail:c});window.dispatchEvent(e)},a.prototype.syncSessionStorage=function(){this.localStorageSupported&&(localStorage.setItem("getSessionStorage","_dummy"),localStorage.removeItem("getSessionStorage"))},a.prototype.clearAllStorage=function(){this.clearAllSessionsStorage(),this.clearLocalStorage()},a.prototype.clearAllSessionsStorage=function(){this.clearInstanceSessionStorage(),this.localStorageSupported&&(localStorage.removeItem(a.DBKEY_SYNC_KEYS),localStorage.setItem("clearAllSessionsStorage","_dummy"),localStorage.removeItem("clearAllSessionsStorage"))},a.prototype.clearInstanceSessionStorage=function(){this.localStorageSupported&&sessionStorage.clear(),this.syncKeys=[]},a.prototype.clearLocalStorage=function(){this.localStorageSupported&&localStorage.clear()},a.prototype.addToSessionStorage=function(a,b){console.log("localStoreManager.addToSessionStorage: "+b),this.addToSessionStorageHelper(a,b),this.addToSyncKeysBackup(b),this.localStorageSupported&&(localStorage.setItem("addToSessionStorage",JSON.stringify({key:b,data:a})),localStorage.removeItem("addToSessionStorage"))},a.prototype.addToSessionStorageHelper=function(a,b){this.addToSyncKeysHelper(b),this.localStorageSupported&&sessionStorage.setItem(b,a)},a.prototype.removeFromSessionStorage=function(a){this.removeFromSessionStorageHelper(a),this.removeFromSyncKeysBackup(a),this.localStorageSupported&&(localStorage.setItem("removeFromSessionStorage",a),localStorage.removeItem("removeFromSessionStorage"))},a.prototype.removeFromSessionStorageHelper=function(a){this.localStorageSupported&&sessionStorage.removeItem(a),this.removeFromSyncKeysHelper(a)},a.prototype.testForInvalidKeys=function(a){if(!a)throw new Error("key cannot be empty");if(this.reservedKeys.some(function(b){return b==a}))throw new Error('The storage key "'+a+'" is reserved and cannot be used. Please use a different key')},a.prototype.syncKeysContains=function(a){return this.syncKeys.some(function(b){return b==a})},a.prototype.loadSyncKeys=function(){this.syncKeys.length||(this.syncKeys=this.getSyncKeysFromStorage())},a.prototype.getSyncKeysFromStorage=function(b){void 0===b&&(b=[]);var c=localStorage.getItem(a.DBKEY_SYNC_KEYS);return null==c?b:JSON.parse(c)},a.prototype.addToSyncKeys=function(a){this.addToSyncKeysHelper(a),this.addToSyncKeysBackup(a),this.localStorageSupported&&(localStorage.setItem("addToSyncKeys",a),localStorage.removeItem("addToSyncKeys"))},a.prototype.addToSyncKeysBackup=function(b){var c=this.getSyncKeysFromStorage();c.some(function(a){return a==b})||(c.push(b),this.localStorageSupported&&localStorage.setItem(a.DBKEY_SYNC_KEYS,JSON.stringify(c)))},a.prototype.removeFromSyncKeysBackup=function(b){var c=this.getSyncKeysFromStorage(),d=c.indexOf(b);d>-1&&(c.splice(d,1),this.localStorageSupported&&localStorage.setItem(a.DBKEY_SYNC_KEYS,JSON.stringify(c)))},a.prototype.addToSyncKeysHelper=function(a){this.syncKeysContains(a)||this.syncKeys.push(a)},a.prototype.removeFromSyncKeys=function(a){this.removeFromSyncKeysHelper(a),this.removeFromSyncKeysBackup(a),this.localStorageSupported&&(localStorage.setItem("removeFromSyncKeys",a),localStorage.removeItem("removeFromSyncKeys"))},a.prototype.removeFromSyncKeysHelper=function(a){var b=this.syncKeys.indexOf(a);b>-1&&this.syncKeys.splice(b,1)},a.prototype.saveSessionData=function(b,c){void 0===c&&(c=a.DBKEY_USER_DATA),this.testForInvalidKeys(c),this.removeFromSyncKeys(c),this.localStorageSupported&&(localStorage.removeItem(c),sessionStorage.setItem(c,b))},a.prototype.saveSyncedSessionData=function(b,c){void 0===c&&(c=a.DBKEY_USER_DATA),this.testForInvalidKeys(c),this.localStorageSupported&&localStorage.removeItem(c),this.addToSessionStorage(b,c)},a.prototype.savePermanentData=function(b,c){console.log("localStoreManager.savePermanentData: "+c),void 0===c&&(c=a.DBKEY_USER_DATA),this.testForInvalidKeys(c),this.removeFromSessionStorage(c),this.localStorageSupported&&localStorage.setItem(c,b)},a.prototype.getData=function(b){void 0===b&&(b=a.DBKEY_USER_DATA),this.testForInvalidKeys(b);var c=null;return this.localStorageSupported&&(c=sessionStorage.getItem(b),console.log("LocalStoreManager.getData TRY SESSION STORAGE"+b),console.log(c),null==c&&(c=localStorage.getItem(b),console.log("LocalStoreManager.getData TRY LOCAL STORAGE"+b),console.log(c))),c},a.prototype.getDataObject=function(b){void 0===b&&(b=a.DBKEY_USER_DATA);var c=this.getData(b);return console.log(c),null!=c?JSON.parse(c):null},a.prototype.deleteData=function(b){void 0===b&&(b=a.DBKEY_USER_DATA),this.testForInvalidKeys(b),this.removeFromSessionStorage(b),this.localStorageSupported&&localStorage.removeItem(b)},a}(),BestForMe.LocalStoreManager.syncListenerInitialised=!1,BestForMe.LocalStoreManager.DBKEY_USER_DATA="user_data",BestForMe.LocalStoreManager.DBKEY_SYNC_KEYS="sync_keys",Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,b){function c(a,b){return a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)}if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return!1;for(var f=0|b,g=Math.max(f>=0?f:e-Math.abs(f),0);g<e;){if(c(d[g],a))return!0;g++}return!1}}),BestForMe.ErrorHandlerMixin={handleError:function(a,b,c){console.log("handleError RESPONSE"),console.log(a),b&&(console.log("handleError OPTIONS"),console.log(b));var d={errorCode:0,errorMessage:"",action:null};if(a.status&&(d.errorCode=a.status),200===d.errorCode?(d.action="silent",d.errorMessage+="Success."):500===d.errorCode||503===d.errorCode||504===d.errorCode||0===d.errorCode?(d.action="message",d.errorMessage+=this.appData.errorMessage[d.errorCode]):404===d.errorCode?(d.action="error",d.errorMessage+=this.appData.errorMessage[d.errorCode]):403===d.errorCode?(d.action="message",d.errorMessage+="You do not have sufficient permission to perform this action."):401===d.errorCode?(d.action="login",b.data&&b.data.match(/grant_type=password/)?d.errorMessage+="Invalid username and password combination. Please try log in again.":d.errorMessage+="Your login has expired. Please try log in again."):400===d.errorCode&&(b.data&&b.data.match(/grant_type=refresh_token/)?(d.action="login",d.errorMessage+="Your login has expired. Please try log in again."):b.data&&(b.data.match(/grant_type=password/)||b.data.match(/grant_type=client_credentials/))?(d.action="error",d.errorMessage+=this.appData.errorMessage[d.errorCode]):(d.action="message",d.errorMessage+="There was a problem handling your request. Please contact technical support if problems persist.")),console.log("ERROR"),console.log(d),c)if("error"===d.action||"login"===d.action)if(this.dataChannel)console.log("ROUTE DIRECTLY FROM ERROR HANDLER USING dataChannel  IN SCOPE"),this.dataChannel.trigger("data:fetch:error",d);else{console.log("ROUTE DIRECTLY FROM ERROR HANDLER USING OWN dataChannel");var e=Backbone.Radio.channel("data");e.trigger("data:fetch:error",d)}else"message"===d.action&&(console.log("SWAL DIRECTLY FROM ERROR HANDLER"),swal(d.errorMessage));return d}},BestForMe.LocalStorageMixin={fetchLocalStorage:function(){this instanceof Backbone.Collection,this instanceof Backbone.Model;if(this instanceof Backbone.Model){var a=localStorage.getItem(this.cid);return!!a&&(this.set(JSON.parse(a)),this)}},saveLocalStorage:function(){localStorage.setItem(this.cid,JSON.stringify(this.toJSON()))},destroyLocalStorage:function(){localStorage.removeItem(this.cid)}},BestForMe.ChangeTitleMixin={changePageTitle:function(a,b){console.log(a+" - "+b);var c=null;c=a===b?a:b+" - "+a,document.title=c}},BestForMe.RemoveTemplateWrapperBehavior=Backbone.Marionette.Behavior.extend({onRender:function(){1===this.view.el.childElementCount&&(this.view.$el=this.view.$el.children(),this.view.$el.unwrap(),this.view.setElement(this.view.$el))}}),BestForMe.InternalLinkBehavior=Marionette.Behavior.extend({ui:{link:"a"},events:{"click @ui.link":"onLinkClicked"},onLinkClicked:function(a){if($(a.currentTarget).attr("href")&&$(a.currentTarget).attr("href").match(/^\//)){a.stopPropagation(),a.preventDefault();var b=a.currentTarget.pathname;if(console.log("InternalLinkBehavior.onLinkClicked INTERNAL LINK: "+b),this.view.routerChannel)this.view.routerChannel.trigger("navigate:to:page",b);else{var c=Backbone.Radio.channel("router");c.trigger("navigate:to:page",b)}}}}),BestForMe.LogoutBehavior=Marionette.Behavior.extend({ui:{logout:".logout"},events:{"click @ui.logout":"onClickLogout"},onClickLogout:function(){if(this.view.authChannel)var a=this.view.authChannel;else var a=Backbone.Radio.channel("auth");swal({title:"Are you sure you would like to log out?",type:"warning",showCancelButton:!0,confirmButtonText:"Log Out",closeOnConfirm:!0},function(){a.trigger("log:out")})}}),BestForMe.PaginationBehavior=Backbone.Marionette.Behavior.extend({ui:{goToPage:".pagination-link"},events:{"click @ui.goToPage":"goToPage"},pagination:{dotsPrevious:0,previous:0,current:0,next:0,dotsNext:0,total:0,showTotal:0,showFirst:0},onBeforeRender:function(){this.makePagination()},goToPage:function(a){var b=a.currentTarget.dataset.page;this.view.goToPage(b)},clearPagination:function(){this.pagination.dotsPrevious=0,this.pagination.previous=0,this.pagination.current=0,this.pagination.next=0,this.pagination.dotsNext=0,this.pagination.total=0,this.pagination.showTotal=0,this.pagination.showFirst=0},makePagination:function(){this.view.pagination=this.pagination,this.clearPagination(),this.view.collection&&this.view.collection.totalLength>this.view.collection.pageLength&&(this.pagination.current=parseInt(this.view.collection.page),this.pagination.total=Math.ceil(this.view.collection.totalLength/this.view.collection.perPage),this.pagination.showTotal=1,this.pagination.current>2&&(this.pagination.showFirst=1),this.pagination.current>1&&(this.pagination.previous=this.pagination.current-1,this.pagination.previous>2&&(this.pagination.dotsPrevious=!0)),this.pagination.total-this.pagination.current>1&&(this.pagination.next=this.pagination.current+1,this.pagination.total-this.pagination.next>1&&(this.pagination.dotsNext=!0)),this.pagination.total!==this.pagination.current&&this.pagination.total!==this.pagination.next||(this.pagination.showTotal=0))}}),this.BestForMe=this.BestForMe||{},this.BestForMe.Templates=this.BestForMe.Templates||{},this.BestForMe.Templates["app-layout"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<header id="header"></header>\n<main id="main"></main>\n<results id="results"></results>\n<tutorial id="tutorial"></tutorial>\n<footer id="footer"></footer>'},useData:!0}),this.BestForMe.Templates["error-screen"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<section id="error">\n  <div class="error-notice">\n    <p class="error-message">'+a.escapeExpression((f=null!=(f=c.message||(null!=b?b.message:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"message",hash:{},data:e}):f))+"</p>\n  </div>\n</section>\n"},useData:!0}),this.BestForMe.Templates["footer/footer"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<footer class="footer">\n  <div class="footer-container">\n    <div class="footer-content">\n\n    </div>\n  </div>\n</footer>\n'},useData:!0}),this.BestForMe.Templates.header=Handlebars.template({1:function(a,b,c,d,e){var f;return": "+a.escapeExpression((f=null!=(f=c.projectTitle||(null!=b?b.projectTitle:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"projectTitle",hash:{},data:e}):f))},3:function(a,b,c,d,e){var f;return" - "+a.escapeExpression((f=null!=(f=c.operationalNeedTitle||(null!=b?b.operationalNeedTitle:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"operationalNeedTitle",hash:{},data:e}):f))},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{};return'<div id="header-inner" class="header-inner">\n\n  <div class="brand">\n    <a href="'+a.escapeExpression((g=null!=(g=c.home||(null!=b?b.home:b))?g:c.helperMissing,"function"==typeof g?g.call(h,{name:"home",hash:{},data:e}):g))+'"><h1 class="brand-title">What\'s Best For Me?'+(null!=(f=c.if.call(h,null!=b?b.projectTitle:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(h,null!=b?b.operationalNeedTitle:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+'</h1></a>\n  </div>\n\n    <div class="header-menu">\n        <ul class="menu-list">\n            <li class="menu-item"><a href="/home">Home</a></li>\n            <li class="menu-item"><a href="/about">About</a></li>\n        </ul>\n    </div>\n\n</div>\n\n'},useData:!0}),this.BestForMe.Templates["home-screen"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<section id="home">\n\n  <ul id="project-grid" class="project-grid">\n    <li class="project-hex">\n      <div class="hex-in">\n        <div class="hex-link">\n          <span class=\'hex-bg\'></span>\n          <h1>New Project</h1>\n          <button id="new-project-button" class="project-open new-button">+</button>\n        </div>\n      </div>\n    </li>\n    <li id="create-project" class="project-hex">\n      <div class="hex-in">\n        <a class="hex-link" href="#">\n          <span class=\'hex-bg\'></span>\n          <input class="project-name-input"> </input>\n          <button id="create-project-button" class="project-open new-button">Create</button>\n        </a>\n      </div>\n    </li>\n    <div id="project-list">\n\n    </div>\n  </ul>\n\n</section>\n'},useData:!0}),this.BestForMe.Templates["loading-screen"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<section id="loading">\n  <div class="loader"></div>\n</section>\n'},useData:!0}),this.BestForMe.Templates["login-screen"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="full">\n  <div class="login-divide"><div id="login-brand"></div></div>\n<main id="login-screen">\n\n  <form class="login-form">\n    <label for="username">\n    </label>\n    <input name="username" placeholder="Username" class="login-username" type="text">\n    </input>\n    <label for="password">\n    </label>\n    <input name="password" placeholder="Password" class="login-password" type="password">\n    </input>\n    <div class="login-forgotten-password">\n      <input type="checkbox" class="login-save-checkbox" name="login-save" value="login-save"></input>\n      <p class="login-save-prompt">Stay Logged In?</p>\n      <span class="login-reset-password">Forgotten Password?</span>\n    </div>\n    <div class="login-button">\n      <button tname="submit" class="login-submit" type="button">Log in</button>\n    </div>\n  </form>\n</main>\n  <footer class="login-footer">\n    <div class="login-footer-items">\n    <span class="login-footer-icon"></span>\n    <p class="login-footer-text">Powered by BestForMe</p>\n    </div>\n  </footer>\n</div>\n'},useData:!0}),this.BestForMe.Templates["postcode/postcode-item"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<li class="tag-item postcode-item"><p>'+a.escapeExpression((f=null!=(f=c.postcode||(null!=b?b.postcode:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"postcode",hash:{},data:e}):f))+'</p><button class="clear-btn">&#10006;</button></li>\n'},useData:!0}),this.BestForMe.Templates["postcode/postcode-list"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<ul class="postcode-tag-list">\n\n</ul>'},useData:!0}),this.BestForMe.Templates["postcode/postcode-view"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="postcode-input-container">\n    <h3 class="postcode-input-label">Enter a Postcode</h3>\n    <input class="postcode-input" type="text"> </input>\n    <div class="postcode-buttons">\n    <button type="button" class="add-button btn btn-dark">Add Postcode</button>\n    <button type="button" class="postcode-button btn btn-dark">Search</button>\n    </div>\n</div>\n\n<div class="postcode-list-container">\n\n</div>\n\n<div class="results-view">\n\n</div>\n'},useData:!0}),this.BestForMe.Templates["results/overall-result"]=Handlebars.template({1:function(a,b,c,d,e){return"selected"},3:function(a,b,c,d,e){return'  <p class="logo-caption">EE</p>'},5:function(a,b,c,d,e){return' <p class="logo-caption">Three</p>'},7:function(a,b,c,d,e){return'      <p class="logo-caption">Vodafone</p>'},9:function(a,b,c,d,e){return'<p class="logo-caption">O2</p>'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{};return'<div class="jumbotron jumbotron-fluid">\n    <div class="container">\n        <h1 class="jumbo-title">Best Provider</h1>\n        <p class="lead"></p>\n        <div class="container logo-grid">\n            <div class="col-xs-3">\n                <div class="img-container">\n                    <img class="provider-logo ee-logo '+(null!=(f=c.if.call(g,null!=b?b.ee:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'" src="../../assets/images/EE.png">\n                </div>\n                '+(null!=(f=c.if.call(g,null!=b?b.ee:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+'\n            </div>\n            <div class="col-xs-3">\n                <div class="img-container">\n                    <img class="provider-logo three-logo '+(null!=(f=c.if.call(g,null!=b?b.three:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'" src="../../assets/images/Three.png">\n                </div>\n                '+(null!=(f=c.if.call(g,null!=b?b.three:b,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+'\n            </div>\n            <div class="col-xs-3">\n                <div class="img-container">\n                    <img class="provider-logo vodafone-logo '+(null!=(f=c.if.call(g,null!=b?b.vodafone:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'" src="../../assets/images/Vodafone.png">\n                </div>\n                '+(null!=(f=c.if.call(g,null!=b?b.vodafone:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+'\n            </div>\n            <div class="col-xs-3">\n                <div class="img-container">\n                    <img class="provider-logo o2-logo '+(null!=(f=c.if.call(g,null!=b?b.o2:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'" src="../../assets/images/O2.png">\n                </div>\n                '+(null!=(f=c.if.call(g,null!=b?b.o2:b,{name:"if",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+"\n            </div>\n        </div>\n    </div>\n</div>\n\n"},useData:!0}),this.BestForMe.Templates["results/results-postcode-item"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<li class="postcode-list-item list-group-item">\n    <h1 class="result-postcode">'+j((f=null!=(f=c.postcode||(null!=b?b.postcode:b))?f:h,typeof f===i?f.call(g,{name:"postcode",hash:{},data:e}):f))+'</h1>\n    <!--<h3 class="result-provider">'+j((f=null!=(f=c.bestProvider||(null!=b?b.bestProvider:b))?f:h,typeof f===i?f.call(g,{name:"bestProvider",hash:{},data:e}):f))+'</h3>-->\n    <div class="provider-row">\n        <div class="individual-result ee-result">\n            <details>\n                <summary>\n                    <div class="small-logo-container">\n                        <img class="small-provider-logo ee-logo selected" src="../../assets/images/EE.png">\n                    </div>\n                    <!-- <h3>EE</h3>-->\n                    <div class="provider-progress voice-progress progress">\n                        <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.eeTotal||(null!=b?b.eeTotal:b))?f:h,typeof f===i?f.call(g,{name:"eeTotal",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.eeTotal||(null!=b?b.eeTotal:b))?f:h,typeof f===i?f.call(g,{name:"eeTotal",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <div class="down-arrow-container">\n                        <span class="down-arrow"></span>\n                    </div>\n                </summary>\n                <ul class="list-group">\n                    <li class="list-group-item voice-strength strength">\n                        <img src="../../assets/images/megaphone.svg" class="list-icon">\n                        <label class="progress-label">Voice</label>\n                        <div class="voice-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.eeVoice||(null!=b?b.eeVoice:b))?f:h,typeof f===i?f.call(g,{name:"eeVoice",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.eeVoice||(null!=b?b.eeVoice:b))?f:h,typeof f===i?f.call(g,{name:"eeVoice",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </li>\n                    <li class="list-group-item umts-strength strength">\n                        <img src="../../assets/images/radio-tower.svg" class="list-icon">\n                        <label class="progress-label">3G</label>\n                        <div class="umts-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.eeUmts||(null!=b?b.eeUmts:b))?f:h,typeof f===i?f.call(g,{name:"eeUmts",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.eeUmts||(null!=b?b.eeUmts:b))?f:h,typeof f===i?f.call(g,{name:"eeUmts",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </li>\n                    <li class="list-group-item lte-strength strength">\n                        <img src="../../assets/images/zap.svg" class="list-icon">\n                        <label class="progress-label">4G</label>\n                        <div class="lte-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.eeLte||(null!=b?b.eeLte:b))?f:h,typeof f===i?f.call(g,{name:"eeLte",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.eeLte||(null!=b?b.eeLte:b))?f:h,typeof f===i?f.call(g,{name:"eeLte",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </li>\n                </ul>\n            </details>\n        </div>\n        <div class="individual-result three-result">\n            <details>\n                <summary>\n                    <div class="small-logo-container">\n                        <img class="small-provider-logo three-logo selected" src="../../assets/images/Three.png">\n                    </div>\n                    <!-- <h3>Three</h3> -->\n                    <div class="provider-progress voice-progress progress">\n                        <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.threeTotal||(null!=b?b.threeTotal:b))?f:h,typeof f===i?f.call(g,{name:"threeTotal",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.threeTotal||(null!=b?b.threeTotal:b))?f:h,typeof f===i?f.call(g,{name:"threeTotal",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <div class="down-arrow-container">\n                        <span class="down-arrow"></span>\n                    </div>\n                </summary>\n                <ul class="list-group">\n                    <li class="list-group-item voice-strength strength">\n                        <img src="../../assets/images/megaphone.svg" class="list-icon">\n                        <label class="progress-label">Voice</label>\n                        <div class="voice-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.threeVoice||(null!=b?b.threeVoice:b))?f:h,typeof f===i?f.call(g,{name:"threeVoice",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.threeVoice||(null!=b?b.threeVoice:b))?f:h,typeof f===i?f.call(g,{name:"threeVoice",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </li>\n                    <li class="list-group-item umts-strength strength">\n                        <img src="../../assets/images/radio-tower.svg" class="list-icon">\n                        <label class="progress-label">3G</label>\n                        <div class="umts-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.threeUmts||(null!=b?b.threeUmts:b))?f:h,typeof f===i?f.call(g,{name:"threeUmts",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.threeUmts||(null!=b?b.threeUmts:b))?f:h,typeof f===i?f.call(g,{name:"threeUmts",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </li>\n                    <li class="list-group-item lte-strength strength">\n                        <img src="../../assets/images/zap.svg" class="list-icon">\n                        <label class="progress-label">4G</label>\n                        <div class="lte-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.threeLte||(null!=b?b.threeLte:b))?f:h,typeof f===i?f.call(g,{name:"threeLte",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.threeLte||(null!=b?b.threeLte:b))?f:h,typeof f===i?f.call(g,{name:"threeLte",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </li>\n                </ul>\n            </details>\n        </div>\n        <div class="individual-result vodafone-result">\n            <details>\n                <summary>\n                    <div class="small-logo-container">\n                        <img class="small-provider-logo vodafone-logo selected" src="../../assets/images/Vodafone.png">\n                    </div>\n                    <!-- <h3>Vodafone</h3> -->\n                    <div class="provider-progress voice-progress progress">\n                        <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.vodafoneTotal||(null!=b?b.vodafoneTotal:b))?f:h,typeof f===i?f.call(g,{name:"vodafoneTotal",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.vodafoneTotal||(null!=b?b.vodafoneTotal:b))?f:h,typeof f===i?f.call(g,{name:"vodafoneTotal",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <div class="down-arrow-container">\n                        <span class="down-arrow"></span>\n                    </div>\n                </summary>\n                <ul class="list-group">\n                    <div class="list-group-item voice-strength strength">\n                        <img src="../../assets/images/megaphone.svg" class="list-icon">\n                        <label class="progress-label">Voice</label>\n                        <div class="voice-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.vodafoneVoice||(null!=b?b.vodafoneVoice:b))?f:h,
typeof f===i?f.call(g,{name:"vodafoneVoice",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.vodafoneVoice||(null!=b?b.vodafoneVoice:b))?f:h,typeof f===i?f.call(g,{name:"vodafoneVoice",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </div>\n                    <div class="list-group-item umts-strength strength">\n                        <img src="../../assets/images/radio-tower.svg" class="list-icon">\n                        <label class="progress-label">3G</label>\n                        <div class="umts-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.vodafoneUmts||(null!=b?b.vodafoneUmts:b))?f:h,typeof f===i?f.call(g,{name:"vodafoneUmts",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.vodafoneUmts||(null!=b?b.vodafoneUmts:b))?f:h,typeof f===i?f.call(g,{name:"vodafoneUmts",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </div>\n                    <div class="list-group-item lte-strength strength">\n                        <img src="../../assets/images/zap.svg" class="list-icon">\n                        <label class="progress-label">4G</label>\n                        <div class="lte-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.vodafoneLte||(null!=b?b.vodafoneLte:b))?f:h,typeof f===i?f.call(g,{name:"vodafoneLte",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.vodafoneLte||(null!=b?b.vodafoneLte:b))?f:h,typeof f===i?f.call(g,{name:"vodafoneLte",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </div>\n                </ul>\n            </details>\n        </div>\n        <div class="individual-result o2-result">\n            <details>\n                <summary>\n                    <div class="small-logo-container">\n                        <img class="small-provider-logo o2-logo selected" src="../../assets/images/O2.png">\n                    </div>\n                    <!-- <h3>O2</h3> -->\n                    <div class="provider-progress voice-progress progress">\n                        <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.o2Total||(null!=b?b.o2Total:b))?f:h,typeof f===i?f.call(g,{name:"o2Total",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.o2Total||(null!=b?b.o2Total:b))?f:h,typeof f===i?f.call(g,{name:"o2Total",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <div class="down-arrow-container">\n                        <span class="down-arrow"></span>\n                    </div>\n                </summary>\n                <ul class="list-group">\n                    <div class="list-group-item voice-strength strength">\n                        <img src="../../assets/images/megaphone.svg" class="list-icon">\n                        <label class="progress-label">Voice</label>\n                        <div class="voice-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.o2Voice||(null!=b?b.o2Voice:b))?f:h,typeof f===i?f.call(g,{name:"o2Voice",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.o2Voice||(null!=b?b.o2Voice:b))?f:h,typeof f===i?f.call(g,{name:"o2Voice",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </div>\n                    <div class="list-group-item umts-strength strength">\n                        <img src="../../assets/images/radio-tower.svg" class="list-icon">\n                        <label class="progress-label">3G</label>\n                        <div class="umts-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.o2Umts||(null!=b?b.o2Umts:b))?f:h,typeof f===i?f.call(g,{name:"o2Umts",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.o2Umts||(null!=b?b.o2Umts:b))?f:h,typeof f===i?f.call(g,{name:"o2Umts",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </div>\n                    <div class="list-group-item lte-strength strength">\n                        <img src="../../assets/images/zap.svg" class="list-icon">\n                        <label class="progress-label">4G</label>\n                        <div class="lte-progress progress">\n                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+j((f=null!=(f=c.o2Lte||(null!=b?b.o2Lte:b))?f:h,typeof f===i?f.call(g,{name:"o2Lte",hash:{},data:e}):f))+'%" aria-valuenow="'+j((f=null!=(f=c.o2Lte||(null!=b?b.o2Lte:b))?f:h,typeof f===i?f.call(g,{name:"o2Lte",hash:{},data:e}):f))+'" aria-valuemin="0" aria-valuemax="100"></div>\n                        </div>\n                    </div>\n                </ul>\n            </details>\n        </div>\n    </div>\n</li>'},useData:!0}),this.BestForMe.Templates["results/results-postcode-list"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="postcode-results-list"></div>'},useData:!0}),this.BestForMe.Templates["results/results-view"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="overall-result"></div>\n<div class="results-postcode-list list-group"></div>'},useData:!0}),BestForMe.EEModel=Backbone.Model.extend({defaults:{strength:"",type:""},voiceScore:0,umtsScore:0,lteScore:0,totalScore:0,parse:function(a,b){return console.log(a),a}}),BestForMe.EECollection=Backbone.Collection.extend({model:BestForMe.EEModel,initialize:function(a,b){this.url=b.url+b.postcode,console.log(b),console.log(this.url)},parse:function(a,b){return console.log(a),a.layers},voiceScore:0,umtsScore:0,lteScore:0,volteWarning:!1,highCapacity:!1,lteAdvanced:!0,dividentFreq:0,totalScore:0,processScore:function(){var a=this;this.each(function(b){"2G"===b.attributes.type?a.voiceScore=2*b.attributes.strength:"3G"===b.attributes.type?a.umtsScore=2*b.attributes.strength:"4G800"===b.attributes.type?a.dividentFreq=b.attributes.strength:"4G1800"===b.attributes.type?(a.lteScore+=2*b.attributes.strength,0===b.attributes.strength&&a.dividentFreq>0&&(a.lteScore=2*a.dividentFreq,a.volteWarning=!0)):"4G2600"===b.attributes.type?b.attributes.strength>1&&(a.highCapacity=!0):"4GPlus"===b.attributes.type&&b.attributes.strength>1&&(a.lteAdvanced=!0)}),this.totalScore=(this.voiceScore+this.umtsScore+this.lteScore)/3}}),BestForMe.ThreeModel=Backbone.Model.extend({defaults:{},voiceScore:0,umtsScore:0,lteScore:0,totalScore:0,parse:function(a,b){console.log(a)}}),BestForMe.ThreeCollection=Backbone.Collection.extend({model:BestForMe.ThreeModel,initialize:function(a,b){this.url=b.url+b.postcode,console.log(b),console.log(this.url)},parse:function(a,b){return console.log(a.data),a.data}}),BestForMe.Vodafone=Backbone.Model.extend({defaults:{familyId:"",name:"",description:"",selected:!1},initialize:function(a,b){this.url=b.url},parse:function(a,b){return a.technicalFamilies}}),BestForMe.O2=Backbone.Model.extend({defaults:{familyId:"",name:"",description:"",selected:!1},initialize:function(a,b){this.url=b.url},parse:function(a,b){return a.technicalFamilies}}),BestForMe.OfcomModel=Backbone.Model.extend({defaults:{type:"",voiceIndoor:"",voiceOutdoor:"",umtsIndoor:"",umtsOutdoor:"",lteIndoor:"",lteOutdoor:"",provider:""},voiceScore:0,umtsScore:0,lteScore:0,totalScore:0,initialize:function(){},parse:function(a,b){var c={voiceIndoor:a.voice_indoor,voiceOutdoor:a.voice_outdoor,umtsIndoor:a["3g_indoor"],umtsOutdoor:a["3g_outdoor"],lteIndoor:a["4g_indoor"],lteOutdoor:a["4g_outdoor"],provider:a.provider};return c},processScore:function(){"A"===this.attributes.voiceIndoor?this.voiceScore+=5:"G"===this.attributes.voiceIndoor&&(this.voiceScore+=10),"A"===this.attributes.voiceOutdoor?this.voiceScore+=5:"G"===this.attributes.voiceOutdoor&&(this.voiceScore+=10),"A"===this.attributes.umtsIndoor?this.umtsScore+=5:"G"===this.attributes.umtsIndoor&&(this.umtsScore+=10),"A"===this.attributes.umtsOutdoor?this.umtsScore+=5:"G"===this.attributes.umtsOutdoor&&(this.umtsScore+=10),"A"===this.attributes.lteIndoor?this.lteScore+=5:"G"===this.attributes.lteIndoor&&(this.lteScore+=10),"A"===this.attributes.lteOutdoor?this.lteScore+=5:"G"===this.attributes.lteOutdoor&&(this.lteScore+=10),this.voiceScore>0&&(this.voiceScore/=2),this.umtsScore>0&&(this.umtsScore/=2),this.lteScore>0&&(this.lteScore/=2),this.totalScore=(this.voiceScore+this.umtsScore+this.lteScore)/3,console.log(this.totalScore+this.get("provider"))}}),BestForMe.OfcomCollection=Backbone.Collection.extend({model:BestForMe.OfcomModel,postcode:null,initialize:function(a,b){this.url=b.url+b.postcode,this.postcode=b.postcode},parse:function(a,b){return console.log(a),a.data},processScore:function(){this.each(function(a){a.processScore()})}}),BestForMe.PostcodeModel=Backbone.Model.extend({defaults:{postcode:null,postcodeEngine:null}}),BestForMe.PostcodeCollection=Backbone.Collection.extend({model:BestForMe.PostcodeModel,initialize:function(a,b){}}),BestForMe.ResultsModel=Backbone.Model.extend({defaults:{postcode:null,bestProvider:null,eeVoice:null,eeUmts:null,eeLte:null,eeTotal:null,eeWarning:null,threeVoice:null,threeUmts:null,threeLte:null,threeTotal:null,threeWarning:null,vodafoneVoice:null,vodafoneUmts:null,vodafoneLte:null,vodafoneTotal:null,vodafoneWarning:null,o2Voice:null,o2Umts:null,o2Lte:null,o2Total:null,o2Warning:null}}),BestForMe.ResultsCollection=Backbone.Collection.extend({model:BestForMe.ResultsModel,initialize:function(a,b){}}),BestForMe.BestForMeDataManager=Backbone.Marionette.Object.extend({appData:null,dataChannel:null,authChannel:null,requestQueue:[],errorHandlingInProgress:!1,coreDataFetched:!1,eeFetched:!1,threeFetched:!1,vodafoneFetched:!1,o2Fetched:!1,ofcomFetched:!1,postcode:null,data:{ee:null,three:null,vodafone:null,o2:null,ofcom:null},initialize:function(a){this.appData=a.appData,this.dataChannel=Backbone.Radio.channel("data")},initData:function(a){console.log("fetching results"),this.postcode=a,this.data.ee=new BestForMe.EECollection(null,{postcode:a,url:this.appData.endpoints.ee}),this.data.three=new BestForMe.ThreeCollection(null,{postcode:a,url:this.appData.endpoints.three}),this.data.vodafone=new BestForMe.Vodafone(null,{postcode:a,url:this.appData.endpoints.vodafone}),this.data.o2=new BestForMe.O2(null,{postcode:a,url:this.appData.endpoints.o2}),this.data.ofcom=new BestForMe.OfcomCollection(null,{postcode:a,url:this.appData.endpoints.ofcom}),this.fetchCoreData()},clearData:function(){this.data.ee=null,this.data.three=null,this.data.vodafone=null,this.data.o2=null,this.data.ofcom=null},fetchCoreData:function(){var a=this;this.data.ee.fetch({reset:!0,success:function(b,c,d){var e="ee";a.dataFetchSuccess(b,c,d,e)},error:function(b,c,d){var e="ee";a.dataFetchError(b,c,d,e)}}),this.data.ofcom.fetch({reset:!0,success:function(b,c,d){var e="ofcom";a.dataFetchSuccess(b,c,d,e)},error:function(b,c,d){var e="ofcom";a.dataFetchError(b,c,d,e)}})},dataFetchSuccess:function(a,b,c,d){if("ee"===d)this.eeFetched=!0,console.log(a),console.log(a.umtsScore);else if("three"===d)this.threeFetched=!0;else if("vodafone"===d)this.vodafoneFetched=!0;else if("o2"===d)this.o2Fetched=!0;else if("ofcom"===d){this.ofcomFetched=!0;var e=new BestForMe.ComparisonEngine({appData:this.appData,data:this.data,postcode:this.postcode});e.calculateBestProvider()}this.coreDataFetched||this.checkCoreDataFetched()},checkCoreDataFetched:function(){this.eeFetched&&this.threeFetched&&this.vodafoneFetched&&this.o2Fetched&&this.ofcomFetched&&(this.coreDataFetched=!0,this.dataChannel.trigger("bestForMe:core:data:fetched"))},dataFetchError:function(a,b,c,d){console.log("BestForMeDataManager.dataFetchError: "+d+", error handling in progress: "+this.errorHandlingInProgress);this.handleError(b,c,!0)}}),_.extend(BestForMe.BestForMeDataManager.prototype,BestForMe.ErrorHandlerMixin),BestForMe.ComparisonEngine=Backbone.Marionette.Object.extend({appData:null,dataChannel:null,resultsView:null,postcode:null,data:null,initialize:function(a){this.appData=a.appData,this.data=a.data,this.postcode=a.postcode,this.dataChannel=Backbone.Radio.channel("data")},calculateBestProvider:function(){var a=new BestForMe.ResultsModel;a.set({postcode:this.postcode});var b=this.data.ofcom.where({provider:"Three"});b[0].processScore();var c={provider:"Three",score:b[0].totalScore};a.set({threeVoice:10*b[0].voiceScore}),a.set({threeUmts:10*b[0].umtsScore}),a.set({threeLte:10*b[0].lteScore}),a.set({threeTotal:10*b[0].totalScore});var d=this.data.ofcom.where({provider:"EE"});d[0].processScore();var e={provider:"EE",score:d[0].totalScore};a.set({eeVoice:10*d[0].voiceScore}),a.set({eeUmts:10*d[0].umtsScore}),a.set({eeLte:10*d[0].lteScore}),a.set({eeTotal:10*d[0].totalScore});var f=this.data.ofcom.where({provider:"Vodafone"});f[0].processScore();var g={provider:"Vodafone",score:f[0].totalScore};a.set({vodafoneVoice:10*f[0].voiceScore}),a.set({vodafoneUmts:10*f[0].umtsScore}),a.set({vodafoneLte:10*f[0].lteScore}),a.set({vodafoneTotal:10*f[0].totalScore});var h=this.data.ofcom.where({provider:"O2"});h[0].processScore();var i={provider:"O2",score:h[0].totalScore};a.set({o2Voice:10*h[0].voiceScore}),a.set({o2Umts:10*h[0].umtsScore}),a.set({o2Lte:10*h[0].lteScore}),a.set({o2Total:10*h[0].totalScore});var j=[c,e,g,i];j.sort(function(a,b){return b.score-a.score});for(var k=j[0].provider,l=1;l<4;l++)j[0].score===j[l].score&&(k=4===l?"Any Provider":k+" Or "+j[l].provider);a.set({bestProvider:k}),this.appData.data.results.add(a),console.log(this.appData.data.results.models),console.log(this.appData.data.results),this.dataChannel.trigger("comparison:complete",this.data.ofcom.postcode)}}),BestForMe.PostcodeEngine=Backbone.Marionette.Object.extend({appData:null,dataChannel:null,postcodeCollection:null,initialize:function(a){console.log("initpostcodeengine"),this.appData=a.appData,this.postcodeCollection=a.postcodes,this.dataChannel=Backbone.Radio.channel("data")},fetchData:function(){var a=this;this.postcodeCollection.each(function(b){var c=new BestForMe.BestForMeDataManager({appData:a.appData});console.log(b.postcode),c.initData(b.get("postcode")),b.set({postcodeEngine:c})}),console.log(this.postcodeCollection)},something:function(){this.appData.modules.bestForMe&&(this.bestForMeDataManager=new BestForMe.BestForMeDataManager({appData:this.appData}))}}),BestForMe.PostCodeView=Backbone.Marionette.LayoutView.extend({template:BestForMe.Templates["postcode/postcode-view"],behaviors:{removeTemplateWrapperBehavior:{behaviorClass:BestForMe.RemoveTemplateWrapperBehavior}},regions:{postcodeList:".postcode-list-container",results:".results-view"},ui:{postCodeInput:".postcode-input",postCodeButton:".postcode-button",postCodeAdd:".add-button"},events:{"click @ui.postCodeButton":"fetchPostCode","keyup @ui.postCodeInput":"processKey","click @ui.postCodeAdd":"addPostcode"},childEvents:{"fetch:postcode":"fetchPostcode"},appData:null,routerChannel:null,dataChannel:null,postcodeCollection:null,postcodeEngine:null,initialize:function(a){console.log("postcode view"),this.appData=a.appData,this.routerChannel=Backbone.Radio.channel("router"),this.dataChannel=Backbone.Radio.channel("data"),this.postcodeCollection=new BestForMe.PostcodeCollection,this.appData.data.results=new BestForMe.ResultsCollection},onRender:function(){this.postcodeListView=new BestForMe.PostcodeListView({appData:this.appData,collection:this.postcodeCollection}),this.showChildView("postcodeList",this.postcodeListView),this.resultsView=new BestForMe.ResultsView({appData:this.appData,data:this.postcodeCollection}),this.showChildView("results",this.resultsView)},addPostcode:function(){var a=this.ui.postCodeInput.val(),b=new BestForMe.PostcodeModel;b.set({postcode:a}),this.postcodeCollection.add(b)},fetchPostCode:function(){this.postcodeCollection.length<1?swal("Please enter a postcode"):(this.postcodeEngine=new BestForMe.PostcodeEngine({appData:this.appData,postcodes:this.postcodeCollection}),this.postcodeEngine.fetchData())},processKey:function(a){console.log(a),13===a.which&&this.dataChannel.trigger("fetch:results",this.ui.postCodeInput.val())}}),_.extend(BestForMe.PostCodeView.prototype,BestForMe.ChangeTitleMixin),BestForMe.PostcodeItemView=Backbone.Marionette.ItemView.extend({template:BestForMe.Templates["postcode/postcode-item"],ui:{clearBtn:".clear-btn"},events:{"click @ui.clearBtn":"clearPostcode"},appData:null,initialize:function(a){this.appData=a.appData},templateHelpers:function(){return{code:null}},clearPostcode:function(){this.triggerMethod("remove:postcode")}}),BestForMe.PostcodeListView=Backbone.Marionette.CompositeView.extend({template:BestForMe.Templates["postcode/postcode-list"],childView:BestForMe.PostcodeItemView,childViewContainer:".postcode-tag-list",behaviors:{removeTemplateWrapperBehavior:{behaviorClass:BestForMe.RemoveTemplateWrapperBehavior}},ui:{},events:{},childEvents:{"remove:postcode":"clearPostcode"},collectionEvents:{remove:"render",change:"render"},appData:null,initialize:function(a){this.appData=a.appData},clearPostcode:function(a){this.collection.remove(a.model),this.triggerMethod("fetch:postcode")}}),BestForMe.ResultsView=Backbone.Marionette.LayoutView.extend({template:BestForMe.Templates["results/results-view"],behaviors:{removeTemplateWrapperBehavior:{behaviorClass:BestForMe.RemoveTemplateWrapperBehavior}},ui:{},events:{},regions:{overallResult:".overall-result",resultsList:".results-postcode-list"},appData:null,results:null,routerChannel:null,dataChannel:null,provider:null,resultsPostcodeView:null,overallResultView:null,initialize:function(a){console.log("results view"),this.appData=a.appData,this.results=a.data,this.routerChannel=Backbone.Radio.channel("router"),this.dataChannel=Backbone.Radio.channel("data"),this.listenTo(this.dataChannel,"comparison:complete",this.showOverallResult)},templateHelpers:function(){return{provider:this.provider}},showOverallResult:function(a){this.calculateOverallResult(),this.resultsPostcodeView=new BestForMe.PostcodeResultList({appData:this.appData,collection:this.appData.data.results}),this.showChildView("resultsList",this.resultsPostcodeView)},calculateOverallResult:function(){var a=0,b=0,c=0,d=0;this.appData.data.results.each(function(e){a+=e.get("eeTotal"),b+=e.get("threeTotal"),c+=e.get("vodafoneTotal"),d+=e.get("o2Total")});var e=this.appData.data.results.length;a/=e,b/=e,c/=e,d/=e;var f={provider:"EE",score:a,selected:!1},g={provider:"Three",score:b,selected:!1},h={provider:"Vodafone",score:c,selected:!1},i={provider:"O2",score:d,selected:!1},j=[g,f,h,i];j.sort(function(a,b){return b.score-a.score});var k=j[0].provider;j[0].selected=!0;for(var l=1;l<4;l++)j[0].score===j[l].score&&(4===l?(k="Any Provider",j[l].selected=!0):(k=k+" Or "+j[l].provider,j[l].selected=!0));this.overallResultView=new BestForMe.OverallResultView({appData:this.appData,result:k,providers:j}),this.showChildView("overallResult",this.overallResultView)}}),_.extend(BestForMe.ResultsView.prototype,BestForMe.ChangeTitleMixin),BestForMe.PostcodeResultItem=Backbone.Marionette.ItemView.extend({template:BestForMe.Templates["results/results-postcode-item"],ui:{},events:{},appData:null,initialize:function(a){this.appData=a.appData,console.log(this.model)},templateHelpers:function(){return{code:null}},onAttach:function(){$(".progress-bar").each(function(a){var b=$(this).attr("aria-valuenow"),c="";b>60?c="green":b>25&&b<=60?c="yellow":b<25&&(c="red"),$(this).addClass(c)})}}),BestForMe.PostcodeResultList=Backbone.Marionette.CompositeView.extend({template:BestForMe.Templates["results/results-postcode-list"],childView:BestForMe.PostcodeResultItem,childViewContainer:".postcode-results-list",behaviors:{removeTemplateWrapperBehavior:{behaviorClass:BestForMe.RemoveTemplateWrapperBehavior}},ui:{},events:{},collectionEvents:{change:"render"},appData:null,initialize:function(a){this.appData=a.appData,console.log(this.collection)}}),BestForMe.OverallResultView=Backbone.Marionette.ItemView.extend({template:BestForMe.Templates["results/overall-result"],ui:{},events:{},appData:null,providers:null,result:null,initialize:function(a){this.appData=a.appData,this.result=a.result,this.providers=a.providers},templateHelpers:function(){console.log(this.providers);for(var a,b,c,d=!1,e=0;e<4;e++)"EE"===this.providers[e].provider?b=this.providers[e].selected:"Three"===this.providers[e].provider?a=this.providers[e].selected:"Vodafone"===this.providers[e].provider?c=this.providers[e].selected:"O2"===this.providers[e].provider&&(d=this.providers[e].selected);return{overallBestProvider:this.result,ee:b,three:a,vodafone:c,o2:d}}}),BestForMe.Router=Backbone.Marionette.AppRouter.extend({appRoutes:{"loading(/)":"showLoadingScreen","home(/)":"showHomeScreen","(/)":"showHomeScreen","error(/)(:errorCode)":"showErrorScreen","pagenotfound(/)":"showPageNotFound","*path":"showPageNotFound"},appDataFetched:!0,routesAllowedBeforeDataFetched:["showLoadingScreen","showErrorScreen","showPageNotFound","showHomeScreen"],routerChannel:null,allowBlockedRoute:!1,blockedRoute:null,appData:null,smartHistory:{previousPage:null,currentPage:null},initialize:function(a){this.appData=a.appData,this.smartHistory.previousPage=this.appData.rootHomePage,this.routerChannel=Backbone.Radio.channel("router"),console.log("router init"),this.listenTo(this.routerChannel,"server:down",this.onServerDown),this.listenTo(this.routerChannel,"go:back",this.goBack)},onDataFetched:function(){console.log("Router.onDataFetched ADD DATA FETCHED!!!!"),this.appDataFetched=!0},onServerDown:function(){if(console.log("App.onServerDown, blockedRoute: "+JSON.stringify(this.blockedRoute)),this.allowBlockedRoute=!0,this.blockedRoute){var a=this.routeUrlFromRouteMethod(this.blockedRoute.name,this.blockedRoute.args);this.navigate(a,{trigger:!0}),this.blockedRoute=null}else this.navigate(this.appData.rootHomePage,{trigger:!0})},execute:function(a,b,c,d){if(console.log("Router.execute name: "+c+", args: "+JSON.stringify(b)+", allowBlockedRoute: "+this.allowBlockedRoute),this.appDataFetched)this.blockedRoute&&(this.blockedRoute=null);else{for(var e=!1,f=0;f<this.routesAllowedBeforeDataFetched.length;f++)if(c.match(this.routesAllowedBeforeDataFetched[f])){e=!0,console.log("Router.execute ROUTE ALLOWED BEFORE DATA FETCHED!!!! name: "+c);break}if(!e&&!this.allowBlockedRoute)return console.log("Router.execute  NO DATA CANCEL ROUTE!!!! name: "+c),this.blockedRoute={},this.blockedRoute.args=b,this.blockedRoute.name=c,!1;!e&&this.allowBlockedRoute&&(this.allowBlockedRoute=!1)}a&&a.apply(this,b)},onRoute:function(a,b,c){$(document).scrollTop(0),console.log("Router.onRoute name: "+a+", path: "+b+", args: "+JSON.stringify(c));var d=this.routeUrlFromRouteMethod(a,c);b.match(/loading/)||b.match(/login/)||(this.smartHistory.currentPage&&(this.smartHistory.previousPage=this.smartHistory.currentPage),this.smartHistory.currentPage=d);var e=this.routeRegexpFromRouteMethod(a,c);this.routerChannel.trigger("route:executed",e)},routeRegexpFromRouteMethod:function(a,b){var c="";"showLoadingScreen"===a?c="loading":"showHomeScreen"===a?c="home":"showErrorScreen"===a?(c="error",b[0]&&(c+="/"+b[0])):"showPageNotFound"===a&&(c="pagenotfound");var d=new RegExp(c,"i");return d},routeUrlFromRouteMethod:function(a,b){var c="";return"showLoadingScreen"===a?c="loading":"showHomeScreen"===a?c="home":"showErrorScreen"===a?(c="error",b[0]&&(c+="/"+b[0])):"showPageNotFound"===a&&(c="pagenotfound"),c}}),BestForMe.RouterController=Backbone.Marionette.Object.extend({appData:null,appLayoutRendered:!1,loginScreenShown:!1,routerChannel:null,initialize:function(a){this.appData=a.appData,this.routerChannel=Backbone.Radio.channel("router"),this.appLayout=new BestForMe.AppLayout({appData:this.appData})},forceInitialRender:function(){return console.log("RouterController.forceInitialRender: AppLayout already rendered? "+this.appLayoutRendered),this.appLayoutRendered?void console.log("RouterController.forceInitialRender: SPECIAL BYPASS CASE, APPLAYOUT ALREADY RENDERED"):(this.appLayoutRendered=!0,void this.appLayout.render())},checkAppLayoutRendered:function(){this.appLayoutRendered||this.forceInitialRender()},showLoadingScreen:function(){console.log("RouterController.showLoadingScreen: AppLayout already rendered? "+this.appLayoutRendered)},showErrorScreen:function(a){console.log("RouterController.showErrorScreen: AppLayout already rendered? "+this.appLayoutRendered),this.checkAppLayoutRendered(),this.appLayout.showErrorScreen(a)},showPageNotFound:function(){console.log("RouterController.showPageNotFound: AppLayout already rendered? "+this.appLayoutRendered),this.checkAppLayoutRendered(),this.appLayout.showErrorScreen(404)},showHomeScreen:function(){console.log("RouterController.showHomeScreen: AppLayout already rendered? "+this.appLayoutRendered),this.checkAppLayoutRendered(),this.appLayout.showHomeScreen()}}),BestForMe.DataManager=Backbone.Marionette.Object.extend({appData:null,dataChannel:null,coreDataFetched:!1,errorHandlingInProgress:!1,bestForMeDataManager:null,bestForMeCoreDataFetched:!1,initialize:function(a){this.appData=a.appData,this.dataChannel=Backbone.Radio.channel("data"),this.initData()},initData:function(){}}),_.extend(BestForMe.DataManager.prototype,BestForMe.ErrorHandlerMixin),BestForMe.AppLayout=Backbone.Marionette.LayoutView.extend({el:"#bestForMe-app",template:BestForMe.Templates["app-layout"],ui:{uiHeader:"#header",uiMain:"#main"},regions:{header:"#header",main:"#main",tutorial:"#tutorial",footer:"#footer"},childEvents:{"reset:app:layout":"resetAppLayout"},appData:null,initialize:function(a){this.appData=a.appData},onRender:function(){console.log("AppLayout.onRender: "+this.isRendered);var a=new BestForMe.HeaderView({appData:this.appData});this.showChildView("header",a);var b=new BestForMe.FooterView({appData:this.appData});this.showChildView("footer",b)},showLoadingScreen:function(){console.log("AppLayout.showLoadingScreen: "+this.isRendered);var a=new BestForMe.LoadingScreen;this.showChildView("main",a)},showErrorScreen:function(a){console.log("AppLayout.showErrorScreen: "+a+" "+this.isRendered);var b=new BestForMe.ErrorScreen({appData:this.appData,errorCode:a});this.showChildView("main",b)},showHomeScreen:function(){console.log("AppLayout.showHomeScreen: "+this.isRendered);var a=new BestForMe.PostCodeView({appData:this.appData});this.showChildView("main",a)},showParameterScreen:function(a){console.log("AppLayout.showParameterScreen for project: "+a+" "+this.isRendered);var b=new BestForMe.ParameterView({appData:this.appData,projectId:a});this.showChildView("main",b)},showTacticalScreen:function(a){console.log("AppLayout.showTacticalScreen for project: "+a+" "+this.isRendered);var b=new BestForMe.TacticalView({appData:this.appData,projectId:a});this.showChildView("main",b)},showSolutionScreen:function(a,b){console.log("AppLayout.showSolutionScreen for project: "+a+" "+this.isRendered);var c=new BestForMe.SolutionView({appData:this.appData,projectId:a,operationalNeedId:b});this.showChildView("main",c)},showCanvasScreen:function(a,b){console.log("AppLayout.showCanvasScreen for project: "+a+" "+this.isRendered);var c=new BestForMe.CanvasView({appData:this.appData,projectId:a,operationalNeedId:b});this.showChildView("main",c)},showTacticScreen:function(a,b){console.log("AppLayout.showTacticScreen for project: "+a+" "+this.isRendered);var c=new BestForMe.TacticView({appData:this.appData,projectId:a,operationalNeedId:b});this.showChildView("main",c)},showParameterExport:function(a){console.log("AppLayout.showExportScreen for project: "+a+" "+this.isRendered);var b=new BestForMe.ParameterExport({appData:this.appData,projectId:a});this.showChildView("main",b)},showOperationalNeedExport:function(a){console.log("AppLayout.showExportScreen for project: "+a+" "+this.isRendered);var b=new BestForMe.OperationalNeedExport({appData:this.appData,projectId:a});this.showChildView("main",b)},showFinalTacticExport:function(a,b){console.log("AppLayout.showExportScreen for project: "+a+" "+this.isRendered);var c=new BestForMe.FinalTacticExport({appData:this.appData,projectId:a,operationalNeedId:b});this.showChildView("main",c)},resetAppLayout:function(){this.ui.uiHeader.css("margin-top","0"),this.ui.uiMain.css("padding-top","211px")}}),BestForMe.LoadingScreen=Backbone.Marionette.ItemView.extend({template:BestForMe.Templates["loading-screen"],routerChannel:null,serverTimeout:null,serverTimeoutDelay:15e3,initialize:function(a){this.routerChannel=Backbone.Radio.channel("router")},onRender:function(){var a=this;this.serverTimeout=setTimeout(function(){a.onServerTimeout(a)},a.serverTimeoutDelay)},onDestroy:function(){clearTimeout(this.serverTimeout)},onServerTimeout:function(a){console.log("LoadingScreen.onServerTimeout"),clearTimeout(a.serverTimeout),this.routerChannel.trigger("server:down")}}),BestForMe.ErrorScreen=Backbone.Marionette.ItemView.extend({template:BestForMe.Templates["error-screen"],appData:null,errorCode:0,errorMessage:"",initialize:function(a){this.appData=a.appData,a.errorCode&&(this.errorCode=a.errorCode),this.errorMessage=this.appData.errorMessage[this.errorCode]},templateHelpers:function(){return{message:this.errorMessage}}}),BestForMe.HeaderView=Backbone.Marionette.LayoutView.extend({template:BestForMe.Templates.header,home:"/home",ui:{headerNav:"#header-nav",agilityNav:"#agility-nav"},behaviors:{removeTemplateWrapperBehavior:{behaviorClass:BestForMe.RemoveTemplateWrapperBehavior},internalLinkBehavior:{behaviorClass:BestForMe.InternalLinkBehavior}},uiChannel:null,activePage:null,appData:null,projectId:null,projectTitle:null,operationalNeedId:null,operationalNeedTitle:null,showNav:!1,showAgilityNav:!1,navCollection:new Backbone.Collection([{title:"Parameter Guide",link:"/parameter-guide",active:!0,hasOperationalNeedParam:!1},{title:"Tactical Specification",link:"/tactical-specification",active:!1,hasOperationalNeedParam:!1},{title:"Agility Matrix",link:"/agility-matrix",active:!1,hasOperationalNeedParam:!0}]),agilityCollection:new Backbone.Collection([{title:"Technical Solution Library",link:"/technical-solution-library",active:!0,hasOperationalNeedParam:!0},{title:"Tactical Canvas",link:"/tactical-canvas",active:!1,hasOperationalNeedParam:!0},{title:"Final Tactic",link:"/final-tactic",active:!1,hasOperationalNeedParam:!0}]),initialize:function(a){this.appData=a.appData,this.uiChannel=Backbone.Radio.channel("ui"),this.listenTo(this.uiChannel,"update:nav",this.updateNav)},templateHelpers:function(){var a=window.location.origin;return{home:this.home,origin:a,agility:this.agilityCollection,nav:this.navCollection,projectId:this.projectId,projectTitle:this.projectTitle,operationalNeedId:this.operationalNeedId,operationalNeedTitle:this.operationalNeedTitle,showNav:this.showNav,showAgilityNav:this.showAgilityNav}},updateNav:function(a){var b=document.location.href.split("/");if(b="/"+b[3],a.showAgilityNav){this.navCollection.each(function(a){a.set("active",!1)});var c=this.navCollection.where({link:"/agility-matrix"})[0];c.set("active",!0),this.agilityCollection.each(function(a){a.set("active",!1)});var d="";d="/agility-matrix"===b?this.agilityCollection.where({link:"/technical-solution-library"})[0]:this.agilityCollection.where({link:b})[0],d.set("active",!0)}else if(a.showNav){this.navCollection.each(function(a){a.set("active",!1)});var e=this.navCollection.where({link:b})[0];e.set("active",!0)}this.projectId=a.projectId,this.projectId?this.projectTitle=this.appData.data.pathways.projects.at(this.projectId-1).get("name"):this.projectTitle=null,this.operationalNeedId=a.operationalNeedId,
this.operationalNeedId?this.operationalNeedTitle=this.appData.data.pathways.projects.at(this.projectId-1).get("operationalNeeds").at(this.operationalNeedId-1).get("name"):(this.operationalNeedId=1,this.operationalNeedTitle=null),this.showNav=a.showNav,this.showAgilityNav=a.showAgilityNav,this.render()}}),BestForMe.FooterView=Backbone.Marionette.LayoutView.extend({template:BestForMe.Templates["footer/footer"],behaviors:{removeTemplateWrapperBehavior:{behaviorClass:BestForMe.RemoveTemplateWrapperBehavior}},ui:{footerContainer:".footer",tutorialButton:"#show-tutorial",saveButton:".save-button",exportButton:".export-button"},events:{"click @ui.tutorialButton":"showTutorial","click @ui.saveButton":"saveNext"},appData:null,uiChannel:null,dataChannel:null,projectId:null,operationalNeedId:null,exportLink:null,showSave:!1,showExport:!1,initialize:function(a){this.appData=a.appData,this.dataChannel=Backbone.Radio.channel("data"),this.uiChannel=Backbone.Radio.channel("ui"),this.listenTo(this.uiChannel,"update:footer",this.updateFooter)},templateHelpers:function(){var a=window.location.origin;return{origin:a,projectId:this.projectId,operationalNeedId:this.operationalNeedId,exportLink:this.exportLink,showSave:this.showSave,showExport:this.showExport}},updateFooter:function(a){this.projectId=a.projectId,this.operationalNeedId=a.operationalNeedId,this.showSave=a.showSave,this.showExport=a.showExport;var b=Backbone.history.fragment;console.log("UPDATE FOOTER: "+b),b.match(/parameter-guide/)?this.exportLink="/export-parameters/":b.match(/tactical-specification/)?this.exportLink="/export-operational-need/":b.match(/final-tactic/)&&(this.exportLink="/export-final-tactic/"),this.render()},showTutorial:function(){this.dataChannel.trigger("show:tutorial")},saveNext:function(){var a=Backbone.history.fragment;console.log("saveNext FOR LOCATION: "+a),a.match(/parameter-guide/)?this.dataChannel.trigger("save:next:parameter"):a.match(/tactical-specification/)?this.dataChannel.trigger("save:next:tactical"):a.match(/agility-matrix/)||a.match(/technical-solution-library/)?this.dataChannel.trigger("save:next:technical:solution:library"):a.match(/tactical-canvas/)?this.dataChannel.trigger("save:next:tactical:canvas"):console.log("saveNext not enabled on current route!!!")}}),$(function(){"use strict";var a={eeEndpoint:"http://maps.ee.co.uk/all?brand=ee&tab=newajaxcoverage&q=",threeEndpoint:"http://www.three.co.uk/rig/coverageandoutages?postcode=",vodafoneEndpoint:"",o2Endpoint:"",ofcomEndpoint:"https://ofcomapi.samknows.com/mobile-coverage-pc?postcode=",ofcomAddress:"https://ofcomapi.samknows.com/addresses?postcode=",debug:"true",title:"Best For Me",features:{localMode:"true"},modules:{bestForMe:""}},b=new BestForMe(a);b.start()});